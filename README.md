# Fblthp Foundries

**Fblthp Foundries** is an innovative project dedicated to generating new and unique Magic: The Gathering cards using a combination of AI models. Our pipeline covers every step of the process, from text generation to final card rendering, offering customizable options based on user preferences.

## Generative Pipeline Overview

### Text Generation

We offer two pathways for generating card text:

- **GPT-4o-mini:** Utilizes OpenAI's API to generate card themes, names, and fine-tuned text outputs. The structured text is then parsed and prepared for the next stage in the pipeline.
  - *Estimated cost per card: < $0.001*

- **Fine-tuned GPT-2 Model:** Trained on a comprehensive corpus of existing MTG cards, this model employs custom tokenization and XML-like preprocessing to accurately generate card text. The output is parsed and forwarded to the next stage.
  - *Cost per card: $0* (assuming local execution)

- **Urza's Transformer Encoder-Decoder** (in development) Trained on a mixture of existing MTG cards and synthetic ones, this model employs custom tokenization, unmasked self-attention, and initial theme prompt encoding to produce card text.
  - *Cost per card: $0* (assuming local execution)
  

### Image Generation

We support multiple methods for generating card art:

- **DALL-E:** High-quality images are generated via the OpenAI API using the previously created art prompt.
  - *Cost per card: $0.04 for 1024x1024, $0.08 for 1792x1024*

- **Stable Diffusion 3:** Uses open-source weights to generate images locally, ideal for those with access to a capable GPU.
  - *Cost per card: $0* (local GPU required)
 
- **Pixabay:** Queries an online database of images for a close match to the card name. Think clip art.
  - *Cost per card: $0* (Pixabay API key required)

### Card Rendering

The final step in the pipeline involves rendering the card:

- **Magic Set Editor (MSE):** A desktop application that can render cards in several formats from Magic's history.
  - *Cost: Free*

- **Proxyshop:** Utilizes Photoshop plugins and templates from Proxyshop to create the final card image. This rendering is controlled by a separate thread so the main card generation can continue. This method requires a valid Photoshop installation but is otherwise free. Proxyshop supports community templates which allow for greater variety in design.
  - *Cost: Free* (with Photoshop)


## Examples

Here are some examples of cards generated by Fblthp Foundries:

<table>
  <tr>
    <td><img src="./examples/Azure%20Skyweaver%20(Borderless)%20[WAR]%20{42}.jpg" alt="Azure Skyweaver" width="300"/></td>
    <td><img src="./examples/Righteous%20Arbiter%20(Borderless)%20[WAR]%20{42}.jpg" alt="Righteous Arbiter" width="300"/></td>
  </tr>
  <tr>
    <td><img src="./examples/Spectral%20Informant%20(Borderless)%20[WAR]%20{42}.jpg" alt="Spectral Informant" width="300"/></td>
    <td><img src="./examples/Verdant%20Kavu%20(Borderless)%20[WAR]%20{42}.jpg" alt="Verdant Kavu" width="300"/></td>
  </tr>
</table>

## Project Status
Currently in development. We are in the process of writing a PyQt GUI for simple navigation & automation of the card generation process. 

## Technologies

- **PyTorch**
- **Stable Diffusion 3**
- **OpenAI API**
- **Proxyshop** (Photoshop extension for card rendering)
