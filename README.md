# Fblthp Foundries

**Fblthp Foundries** is an innovative Magic: The Gathering project dedicated to generating new and unique cards using a combination of AI models. Our pipeline covers every step of the process, from text generation to final card rendering, offering customizable options based on user preferences.

## Generative Pipeline Overview

### Text Generation

We offer two pathways for generating card text:

- **GPT-4o-mini:** This method leverages OpenAI's API to generate card themes, names, and fine-tuned text outputs. The structured text is parsed and prepared for the next stage in the pipeline.
  - *Estimated cost per card: < $0.001*

- **Fine-tuned GPT-2 Model:** Trained on a comprehensive corpus of existing MTG cards, this model employs custom tokenization and XML-like preprocessing to accurately generate card text. The output is then parsed and forwarded to the next stage.
  - *Cost per card: $0* (Assuming local execution)

### Image Prompt Generation

Image prompts are generated using two pathways:

- **GPT-4o-mini:** Using the generated card text, we ask GPT-4o-mini to create a detailed art prompt suitable for generating card art.
  - *Estimated cost per card: < $0.001*

- **Local Script:** This method extracts relevant details from the card and assembles them into a prompt for art generation.
  - *Cost per card: $0*

### Image Generation

We support two methods for generating card art:

- **DALL-E:** High-quality images are generated via the OpenAI API using the previously created art prompt.
  - *Cost per card: $0.04 for 1024x1024, $0.08 for 1792x1024*

- **Stable Diffusion 3:** Using open-source weights, this method generates images locally, ideal for those with access to a capable GPU.
  - *Cost per card: $0* (Local GPU required)

### Card Rendering

The final step in the pipeline involves rendering the card:

- **Proxyshop:** We use Photoshop plugins and templates from Proxyshop to create the final card image. This method requires a valid Photoshop installation but is otherwise free.
  - *Cost: Free* (with Photoshop)

## Examples

Here are some examples of cards generated by Fblthp Foundries:

### Example 1: *Elder Dragon*
![Azure Skyweaver](./examples/Azure Skyweaver (Borderless) [WAR] {42}.jpg)



### Example 2: *Mystic Grove*
![Righteous Arbiter](./examples/Righteous Arbiter (Borderless) [WAR] {42}.jpg)



## Installation Instructions

To get started with Fblthp Foundries, follow these steps:

1. **Clone the Repository:**
   ```bash
   git clone https://github.com/yourusername/fblthp-foundries.git
   cd fblthp-foundries
   ```

2. **Install Dependencies:**
   ```bash
   pip install -r requirements.txt
   ```

3. **Set Up Environment Variables:**
   - Create a `.env` file in the root directory with your API keys and other necessary configurations.

4. **Run the Pipeline:**
   ```bash
   python main.py
   ```

## Usage

To generate a card, run the following command:

```bash
python generate_card.py --name "Elder Dragon"
```

Replace `"Elder Dragon"` with the name of the card you want to generate.

## Contributing

We welcome contributions to Fblthp Foundries! If you'd like to contribute, please follow these steps:

1. **Fork the Repository.**
2. **Create a New Branch:**
   ```bash
   git checkout -b feature-branch-name
   ```
3. **Make Your Changes and Commit:**
   ```bash
   git commit -m "Description of your changes"
   ```
4. **Push to Your Fork and Submit a Pull Request.**

## Future Goals

Our ongoing efforts aim to enhance the balance of the generated cards and boost the overall creativity of the AI models.

## Technologies

- **PyTorch**
- **Fine-tuned GPT-2 model**
- **Stable Diffusion 3**
- **OpenAI API**
- **Proxyshop** (Photoshop extension for card rendering)
